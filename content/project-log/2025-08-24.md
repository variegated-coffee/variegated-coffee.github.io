+++
title = '2025-08-23: LM GS3 Carrier'
date = 2025-08-23T12:00:00+02:00
draft = false
[params]
  author = 'Magnus Nordlander'
+++
Last entry I discussed the roadmap change happening due to me buying a La Marzocco GS3, and I gave a brief description of my ideas for a carrier board. This past week (and before even posting the last post), I've been busy designing the new carrier, and I'd like to give a little more information on it!

Let's get started with a picture - it does say more than a thousand words after all.

![A render of the LM GS3 Carrier](/images/apec-gs3-carrier.png)

## Features

The basic idea of this board is to be an enabler for incremental upgrades. The board supports running in just a basic no-frills GS3 (which feels weird to say about such a high end machine), and hardware-wise it is fully capable of supporting everything that the original Gicar 3d5 + LM IoT board can (but you are of course giving up compatibility with La Marzoccos own app).

This includes support for:

* The original 16x2 LCD display
* The buttons and LED (although now with PWM dimmable LEDs, so that's fun!)
* The stock rotary pump, solenoids and relays
* The stock 2 wire PT1000 temperature probes
* The GS3 AV flow sensor
* The GS3 MP paddle switch
* The tank and steam boiler level probes
* Using Bluetooth scales for brew by weight (and not just the La Marzocco marked up Lunar)

The board also adds support for:

* Fluid-o-tech FG-series Gear Pumps
* Higher precision 3 or 4 lead PT1000 probes (or, with another reference resistor, PT100 probes)
* Two pressure transducers
* A potentiometer (for adding a Strada EP style paddle)
* EyeSPI displays (or anything EyeSPI connected)
* I2c devices, with two QWIIC ports, and one pinheader
  * This of course includes the Gravity scale board
* Any other Bluetooth LE 5 device 
* An SD card for storage (beyond the 8 MB of settings flash already on the APEC SoM)
* A Femtoprobe, allowing you to program and debug over a single USB cable (personally, I'll be using a short panel mount extension to add an exterior USB port)

I also believe that having a pressure transducer at the brew boiler, in combination with the flow sensor and temperature probes *should* allow me to characterize the relationship between these three and the group pressure. As such, a "virtual" group pressure sensor *should* be possible.

The design does remove the on-off relay present but not used, and unlike the stock 3d5 board, it's strictly for single-group machines. 

Unlike the 3d5, the board doesn't contain a battery-backed-up real time clock. This is a intended omission - not because scheduling isn't useful - but because the current date and time could instead be fetched over WiFi. Not interested in connecting your machine to the Internet? Not to worry, there are plenty of I2C real-time clocks with battery backup that you can connect to the board!

## The display

As mentioned, the board has an EyeSPI connector. I've also designed a board to be able to replace the ancient 16x2 LCD with a TFT. I intend to order this at the same time as the GS3 board, but that'll still be the subject of a future post (display PCB renders are pretty boring). 

## Firmware and timeline

Of course, this is all about what the *hardware* is capable of. In order to actually use that capability, there needs to be firmware implementing it. Since switching out the Bianca as my main machine, I've been mostly using the GS3 to pull my daily shots, and while it is a great machine I find myself missing the ability to flow profile (as well as the ability to pull longer shots than 50 seconds). This is all to say that I'm motivated to get things working. I can't make any *promises* as to the timeline, but I aim to order the boards in September, and I am hoping to be up and running with an alpha firmware at least some time in October (having a exterior USB port makes me a lot less reluctant about installing the new controller "early").

As for a sequence of events, I'll be starting off getting the board to work with just the stock components, and then I will be adding the pressure transducer, gear pump and Gravity board soon-ish thereafter (the gear pump especially might require manufacturing a bracket).

I have a loose idea about adding an EP-style paddle to the group, but that's unlikely to happen this year. The carrier board itself is prepared for it though, with the potentiometer input. Until then, I will probably be using a LilyGo T-Encoder Pro that I have laying around for additional input (haven't decided on wheter to do that using I2C or Wifi though).

## Load cell grate

Another thing that I miss from my Bianca, is having load cells in the drip tray grate. That too is something that I intend to remedy. While I do have an Acaia Lunar, it's just a lot more convenient to have the scales integrated into the machine. That's why I'll be making a load cell grate, similar to the one I made for the Bianca.

I say similar, because the GS3 enables this one to be even better. One of the downsides of the Bianca grate was that there were no convenient way to route the load cell cables for easy detachment. This is not the case for the GS3. I'm planning to use a magnetic connector mounted on the front central panel bracket. That way, you can easily remove the drip tray (just pull on it as per usual), and attaching it back is simply a matter of first connecting the magnetic connector, and then sliding it back in.

We'll see about the timeline for this one.

## The La Marzocco IoT ecosystem

Like I mentioned, this isn't a strict upgrade. You *are* giving up the use of the La Marzocco app. This is probably not a big deal if you're only using it for scheduling, and settings adjustments, and with Bluetooth scale support, it's probably not a big deal - if you're all in on the La Marzocco connected ecosystem (machine, scale and grinder), it might be.

Of course, ideally the protocols used to communicate would be open, but that's unlikely to happen, so unless you're well versed in reverse engineering Bluetooth protocols (specifically the grinder protocol), you probably have to decide if this is a board for you.